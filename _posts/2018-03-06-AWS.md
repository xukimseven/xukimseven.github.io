---
layout: post
title:  "利用AWS(亚马逊云)的免费账户做羞羞事"

date:   2018-3-06 19:01:13
tags:
- 网络
- 科学上网
- CentOS
description: ''
color: 'rgb(255,210,32)'
cover: 'http://blogimg.since1105.wang/2018-03-06-0.png'
---

​	由于最近国内一些不好明说的会议正在召开，对于一些安全类事项的管理，可谓是有上一台阶。不过，这也能理解，国内一直是这样的环境。所以，之前的Alphracks的VPS在次被墙，去官方看了他们的政策，发现，原来他们是不会随意给用户更改IP的。据官方说，更改IP需收3美金，着实尴尬。上次帮我秒改也是一个奇迹哦。不过，据我猜测，大概第一次是会给用户更改的吧。反正，改了一次，撑了整整一个月在此被墙。我也对他没是没办法了。刚好，可以换换口味，玩一玩AWS。

​	之前提到，我申请了一张Payoneer的信用卡，到手后发现它是一张必须充值的信用卡，相当于储值卡。完全不能用于谷歌云或者亚马逊云的免费账户开通。经过一番折腾，选择了香港全球付，虚拟信用卡。这是一张申请零门槛的信用卡。对于我这种学生党，没有一定的经济来源，很难能够办理到一张能够支持海淘的美元信用卡。当时，我也算是高高兴兴的办了一张，也没多想。办理必须往里先充值300人名币，且收取一定的手续费。为了能玩一玩免费VPS，我就先办为敬了。

​	本来想着充进去的钱反正是我的，办好以后取出来就好了。万万没想到，他大概也是为了用户安全考虑吧，转账充值等，必须要先实名认证，类似支付宝。这时又为了取出里面的钱，我也就毫不犹豫实名认证了。官方提示认证时间为1-3天，四天过去了，他发邮件给我，说我张片不符合要求，实名认证需要重新办理。所以我百度了一下，发现很多人遇到这个问题，甚至大多数人是在喷击这个香港全球付，更甚至有人说是这是个香港某大佬用于洗黑钱且有非法收集用户个人信息拿来倒卖的诈骗团伙。其手法就是不让用户通过实名认证，而无法通过转账取出里面的首付款（即300人名币）。由于未实名的用户也是可以使用里面的300块钱用于海淘的，所以在用户通过不了实名认证，只好选择用掉里面的300块钱。这样一周转，他们的钱被我们又掉了，我们的钱相当于在他们手里的干净的钱。在认证过程中，你提供的用户信息也被他们据为己有，甚至拿来倒卖。

​	看到这里，背后一凉。难道我栽了？不管，这是不允许的。。。。。（认真脸）

​	我就尝试了第二次实名认证，按照官方提示露出手臂等等规则，发了我的第二次材料。3天后终于给我过了。但是自从我看了网友爆出的全球付黑料，我还是对他不太放心，所以取出了里面的280块钱，加上被扣除的手续费，里面还剩了10几块钱，用于之后开通AWS或谷歌云的信用卡认证。

​	关于，全球付的开通，参考 [老左博客](http://www.laozuo.org/4749.html)

​	个人建议，如果有国内银行的双币信用卡或是多币信用卡，最好用这种，第一它是实体卡（看到后面就知道为什么），第二相对要安全一些。

---------

​	我也算是一波三四五六折了。其实，我本人偏爱Google的东西，所以一开通信用卡，便选择了开通谷歌云，还是一个万万没想到啊。谷歌云不支持虚拟信用卡，必须实体卡，并拍照上传。我真是想要F**K everything！！！

![google](http://blogimg.since1105.wang/google.gif)

​	第二选择咯，亚马逊云也是可以滴。

![1](http://blogimg.since1105.wang/2018-03-06-1.gif)

-------

#### 一、进入亚马逊云，注册亚马逊云账户

[AWS](https://amazonaws-china.com/cn/) 点击创建免费帐户

![0](http://blogimg.since1105.wang/2018-03-06-0.png)

注册过程与其他任何网站几乎相同。最关键的是，支付方式的验证。

将自己的信用卡卡号等相关信息，填写完整，并电话验证。验证结束之后，AWS会扣除你信用卡里的1美元。当然这1美元不是收费，只是用于用户确认是否填写了正确的信用卡信息。在用户完成所有验证后，将会退还1美元。

所以，在这里需要强调，信用卡必须是正确的，不像以前的美区AppleID那样，如果是用了网上自动生成的虚假美国身份，据我的尝试，是不能正确注册的。而且，卡里至少有1美元用于验证。

如果所有信息都正确，等待24小时即可完成注册。如果信息有错误，AWS将会发送邮件告所用户，修改完以后再等待即可。

#### 二、关于AWS

​	漫长的24小时等待后，终于创建成功了我的免费帐户。

​	这里讲讲免费账户的注意事项：

> 1、30G 流量 / 月
>
> 2、750小时 / 月
>
> ​	 —— 意思是说，一个实例的每个月免费使用时间为750小时，按31是天算一个月就是744个小时，所以一个实例一直开着是完全没有问题的。**但是如果你开了两个实例，那么时间将会是累加的。**即为，开了两个实例，每个开了744小时，那么一个月就开了1488小时，**多出来的738个小时是按原价支付给AWS的。**所以如果不用某个实例，想要重开时必须将原来的实例终止，并**删除相应的卷**。
>
> 3、如果账单里有费用需支付的发，**一定注意看自己的账单的收费实例所在的地区，然后去切换到所在的地区删除或者关闭实例**
>
> 4、**弹性ip是另外收钱的**，不过还算低廉，本人换过几个，现在账单0点几美元，也就两三块钱。所以**想要更换ip又不想实例里的数据丢失**的话，弹性ip还是很好的。

​	本人之所以一直想要用亚马逊云或者谷歌云，一个最大的原因就是，在他们的服务中，是不存在，被封ip后，如果还要继续使用他们的服务，就要强制收取3美元的。因为，亚马逊云和谷歌云相当于是国内的阿里云或者腾讯云等，是创建实例来使用的。不像普通廉价的vps，给的是虚拟空间，一个空间，一直就给你使用，也没有换ip的选项。

​	而且，AWS有15个城市的机房可供选择，用户自行根据需求选择。

![1](http://blogimg.since1105.wang/2018-03-06-1.png)

​	在这里，我还是那句老话，选择美国机房准没错，美国大手大脚，带宽充足。而且亚洲机房的ip我用了几天，一天封一个，大概也是因为国内最近比较严吧。

​	关于美国机房，首推还是洛杉矶，没有原因。。。。。

#### 三、创建实例

选择完地区后将会看到这个界面。

![3](http://blogimg.since1105.wang/2018-03-06-3.png)

点击红圈 **ec2**开始创建实例。

进入之后界面如图

![4](http://blogimg.since1105.wang/2018-03-06-4.png)

点击蓝色的**启动实例**

之后，看下图，选择进入亚马逊镜像商城后，在搜索框内输入 **centos**回车后，选择第一个镜像即可。

![5](http://blogimg.since1105.wang/2018-03-06-5.png)

选择完之后，点击 **continue**进入下一步。

![6](http://blogimg.since1105.wang/2018-03-06-6.png)

接下来默认**下一步：配置实例详细信息**

![7](http://blogimg.since1105.wang/2018-03-06-7.png)

默认**下一步：添加储存**

![8](http://blogimg.since1105.wang/2018-03-06-8.png)

储存大小填写，**8-30G均可**

![9](http://blogimg.since1105.wang/2018-03-06-9.png)

**下一步：添加标签**，名字随意，

![10](http://blogimg.since1105.wang/2018-03-06-10.png)

继续点击**下一步：配置安全组**，**这是关键**

![11](http://blogimg.since1105.wang/2018-03-06-11.png)

这是配置端口防火墙的规则，不配置好这些，会导致ping服务器IP ping 不通，以及连接SSR端口连接不上的问题。

第一条，默认即可。

第二、三、四条必须添加，顺序随意。

第二条：意义为全球任意流量都可访问服务器

第三条：意义为全球的ICMP ping包都可以发送到该服务器，并且发送端将会收到服务器的返回包，通俗的讲就是可以ping 通的意思（如果为了安全起见，仅需要单个或者若干个地址可以ping通服务器的话，手动设置ICMP的来源下的IP地址）

第四条：意义在于打开SSR所需的端口号，根据自己的需求来定。要几个开几个，端口号在端口范围内自定义。

接下来，**审核和启动**

在核查实力启动时，会创建一个密钥，用于远程登陆使用，所以，很关键。将其下载到本地，待用。

![12](http://blogimg.since1105.wang/2018-03-06-12.png)

![13](http://blogimg.since1105.wang/2018-03-06-13.png)

下载之后启动实例，稍等片刻，实例便创建完成。

![14](http://blogimg.since1105.wang/2018-03-06-14.png)

创建好实例之后，在本地用CMD，ping一下实例的ipv4_公有ip。对于美国西海岸而言，ping值在160-220之间，我觉得都是可以接受的，当然越小越好。如果超过的话，建议先删除实例，删除卷，然后重复上述过程重新建立一个实例。

如果用`ping X.X.X.X -t`发现丢包率很高的话，同样建议，先删除实例，删除卷，然后重复上述过程重新建立一个实例。

还有一种可能就是本地的网络环境比较差，ping值较大也是情有可原，所以建议选择在网络环境好的情况下测试ping值，或推荐网站 [ipip.net](https://www.ipip.net/) 。用网站内的实用工具下的PING，可获得国内各地的ping值情况，来做出相应的选择。

**关于删除实例：**

![15](http://blogimg.since1105.wang/2018-03-06-15.png)

终止完实例后，进入卷，将卷删除，即可。

ps：实例终止之后，会依然留在实例表中，但是实例状态将显示 terminating，而不是running。不用担心，几分钟后自动消失。不会对继续创建实例产生影响。

#### 四、连接实例

以上介绍了创建实例的过程，接下来就是远程连接上实例，以便对实例进行相关的部署。

打开远程连接工具，**XShell5**或者**SSH Secure File Transfer Client**等工具，这里以**XShell5**为例。

一、新建连接

![16](http://blogimg.since1105.wang/2018-03-06-16.png)

![17](http://blogimg.since1105.wang/2018-03-06-17.png)

之后根据下图填写相关内容，

![18](http://blogimg.since1105.wang/2018-03-06-18.png)

名称随意，主机填写ipv4_公有ip

![19](http://blogimg.since1105.wang/2018-03-06-19.png)

进入身份验证页面，进行密钥的使用。

![20](http://blogimg.since1105.wang/2018-03-06-20.png)

方法点开下拉框选择**PublicKey**

用户名必须填写 **centos**

用户密钥用浏览找到之前创建实例时下载的密钥

最后确定，看到AWS选项双击或点击连接，即可连接至远程服务器

![21](http://blogimg.since1105.wang/2018-03-06-21.png)

此时连接的是centos为用户，而不是最高权限的root。且此时的root是没有密码的。

所以，接下来为root用户设置密码

终端键入

```shell
sudo passwd root
```

![23](http://blogimg.since1105.wang/2018-03-06-23.png)

在之后配置SSR的时候，需要root的权限，使用root的权限只需在终端键入

```shell
su root
```

并输入设置好的密码即可。

-----------

​	到这里关于AWS的基础使用已经介绍的差不多了，关于AWS的使用，本人亦在学习之中，在日后会更新相关的使用内容或心得。

​	关于SSR的搭建参考我的另一篇文章  [SSR的搭建](https://xukimseven.github.io/2018/01/22/SSR%E7%9A%84%E6%90%AD%E5%BB%BA.html)

-----------

​	如果看到这篇文章还有什么疑问想要寻求帮助的，欢迎联系本人。微博、qq、微信在文章末尾处。欢迎来告诉我你的想法。

​	如需转载，请注明出处，谢谢。
